const a0_0x2acc0c=a0_0x1b5f;(function(_0x3a8e1e,_0x9fce6){const _0x504228=a0_0x1b5f,_0x322131=_0x3a8e1e();while(!![]){try{const _0x4af6f3=-parseInt(_0x504228(0x13f))/0x1*(-parseInt(_0x504228(0x148))/0x2)+parseInt(_0x504228(0x179))/0x3*(-parseInt(_0x504228(0x139))/0x4)+-parseInt(_0x504228(0x17e))/0x5+-parseInt(_0x504228(0x193))/0x6*(parseInt(_0x504228(0x192))/0x7)+parseInt(_0x504228(0x134))/0x8+-parseInt(_0x504228(0x153))/0x9+parseInt(_0x504228(0x199))/0xa*(parseInt(_0x504228(0x15c))/0xb);if(_0x4af6f3===_0x9fce6)break;else _0x322131['push'](_0x322131['shift']());}catch(_0x5bfa4f){_0x322131['push'](_0x322131['shift']());}}}(a0_0x470e,0xb7fc9));const a0_0x3d9ecb=(function(){let _0x18b2b3=!![];return function(_0x58c65a,_0x23762f){const _0x1a9657=_0x18b2b3?function(){const _0x2598f4=a0_0x1b5f;if(_0x23762f){const _0x3a0ceb=_0x23762f[_0x2598f4(0x15a)](_0x58c65a,arguments);return _0x23762f=null,_0x3a0ceb;}}:function(){};return _0x18b2b3=![],_0x1a9657;};}()),a0_0x48aec9=a0_0x3d9ecb(this,function(){const _0x5dce0e=a0_0x1b5f,_0x25941b={'VqscN':_0x5dce0e(0x156)};return a0_0x48aec9[_0x5dce0e(0x188)]()['search'](_0x25941b[_0x5dce0e(0x19a)])[_0x5dce0e(0x188)]()[_0x5dce0e(0x159)](a0_0x48aec9)[_0x5dce0e(0x19d)](_0x25941b[_0x5dce0e(0x19a)]);});function a0_0x470e(){const _0xc0d044=['search','qRWTA','NSdpZ','stdout','zwIwP','RbGYT','push','from','scale=512:512:flags=lanczos:force_original_aspect_ratio=decrease,format=rgba,pad=512:512:(ow-iw)/2:(oh-ih)/2:color=#00000000,setsar=1','save','nBYLV','bin','unlink','libwebp','writeFile','aZWzu','join','stringify','7372592cwobUQ','webp','https://api.xteam.xyz/sticker/wm?','Image','\x27)))\x0ac.width\x20=\x20c.height\x20=\x20512\x0alet\x20max\x20=\x20Math.max(im.width,\x20im.height)\x0alet\x20w\x20=\x20512\x20*\x20im.width\x20/\x20max\x0alet\x20h\x20=\x20512\x20*\x20im.height\x20/\x20max\x0actx.drawImage(im,\x20256\x20-\x20w\x20/\x202,\x20256\x20-\x20h\x20/\x202,\x20w,\x20h)\x0a','376060TVVixs','../tmp/','length','writeUIntLE','application/octet-stream','frkzd','1wCZhzl','promises','input','XSMyQ','html','xNzKI','SILwa','QyBIx','bMnOT','751292RNvsoN','toBuffer','toFormat','PUFWO','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','OgnSk','RPLoH','Awfhk','xYaFK','randomBytes','mxOMQ','7429446kLkZCR','exit','end','(((.+)+)+)+$','text/plain','ruPBM','constructor','apply','vJYKM','58619Yxyfny','status','magick','reply','PRCot','buffer','default','RoabH','ULyhq','chat','pipe','png','concat','ffmpeg','includes','error','-vcodec','COboH','test','exports','wlsNs','format','support','let\x20im\x20=\x20await\x20loadImg(\x27data:','GwazE','webp:-','inputFormat','ext','entries','33lKtMvQ','hex','iBcEM','BceBi','WEBP','4240690TppLej','data','https://nurutomo.herokuapp.com/api/canvas?','aFDTQ','load','rReXk','.jpeg','text','GpWth','convert','toString','xQpMU','ffmpegWebp','omgBB','dcdrx','NHLbi','url','POST','addOutputOptions','wa-sticker-formatter','7RiErKE','987522sInUon','bGztL','MlYPo','close','-vf','utf8','4370htAumn','VqscN',';base64,\x27+(await\x20window.loadToDataURI(\x27','exif'];a0_0x470e=function(){return _0xc0d044;};return a0_0x470e();}a0_0x48aec9();import{dirname}from'path';import{fileURLToPath}from'url';import*as a0_0x4b03fd from'fs';import*as a0_0x28c2b9 from'path';import*as a0_0x5f4a12 from'crypto';import{ffmpeg}from'./converter.js';import a0_0x235b3a from'fluent-ffmpeg';import{spawn}from'child_process';import a0_0x4eadb6 from'./uploadFile.js';import a0_0x337739 from'./uploadImage.js';import{fileTypeFromBuffer}from'file-type';import a0_0x2d4e65 from'node-webpmux';import a0_0x3f0f4f from'node-fetch';const __dirname=dirname(fileURLToPath(import.meta[a0_0x2acc0c(0x18e)])),tmp=a0_0x28c2b9[a0_0x2acc0c(0x1ad)](__dirname,'../tmp');function sticker2(_0x3c47db,_0x123867){const _0x672361=a0_0x2acc0c,_0xb73d={'dcdrx':function(_0x30815b,_0x2bfebc){return _0x30815b(_0x2bfebc);},'XSMyQ':function(_0x56e5a5,_0x9e0318){return _0x56e5a5!==_0x9e0318;},'xVZQa':function(_0x1ec0fa,_0x338015){return _0x1ec0fa+_0x338015;},'bMnOT':function(_0x333820,_0xb042ad,_0x47cb58){return _0x333820(_0xb042ad,_0x47cb58);},'PUFWO':_0x672361(0x169),'GpWth':_0x672361(0x167),'iBcEM':_0x672361(0x16b),'RoabH':_0x672361(0x187),'UcFlU':'png:-','MlYPo':_0x672361(0x175),'bGztL':_0x672361(0x17f),'qRWTA':_0x672361(0x154),'Wkwkj':function(_0x6f82b8,_0xe7e2ec){return _0x6f82b8(_0xe7e2ec);}};return new Promise(async(_0x3ccd73,_0x3fab99)=>{const _0x2cb146=_0x672361;try{if(_0x123867){let _0x526f3b=await _0xb73d[_0x2cb146(0x18c)](a0_0x3f0f4f,_0x123867);if(_0xb73d[_0x2cb146(0x142)](_0x526f3b[_0x2cb146(0x15d)],0xc8))throw await _0x526f3b['text']();_0x3c47db=await _0x526f3b[_0x2cb146(0x161)]();}let _0xaf5e64=a0_0x28c2b9[_0x2cb146(0x1ad)](tmp,_0xb73d['xVZQa'](+new Date(),_0x2cb146(0x184)));await a0_0x4b03fd[_0x2cb146(0x140)]['writeFile'](_0xaf5e64,_0x3c47db);let _0x4e1e18=_0xb73d[_0x2cb146(0x147)](spawn,_0xb73d[_0x2cb146(0x14b)],['-y','-i',_0xaf5e64,_0x2cb146(0x197),_0x2cb146(0x1a5),'-f',_0xb73d[_0x2cb146(0x186)],'-']);_0x4e1e18['on'](_0xb73d[_0x2cb146(0x17b)],_0x3fab99),_0x4e1e18['on'](_0x2cb146(0x196),async()=>{const _0x20969a=_0x2cb146;await a0_0x4b03fd[_0x20969a(0x140)][_0x20969a(0x1a9)](_0xaf5e64);});let _0x2847e0=[];const [_0x27349c,..._0x57badf]=[...module[_0x2cb146(0x16f)][_0x2cb146(0x172)]['gm']?['gm']:module[_0x2cb146(0x16f)]['magick']?[_0x2cb146(0x15e)]:[],_0xb73d[_0x2cb146(0x163)],_0xb73d['UcFlU'],_0xb73d[_0x2cb146(0x195)]];let _0x179104=_0xb73d[_0x2cb146(0x147)](spawn,_0x27349c,_0x57badf);_0x179104['on'](_0x2cb146(0x16b),_0x3b0c9c=>conn[_0x2cb146(0x15f)](m[_0x2cb146(0x165)],util[_0x2cb146(0x171)](_0x3b0c9c),m)),_0x179104[_0x2cb146(0x1a0)]['on'](_0xb73d[_0x2cb146(0x194)],_0x279e47=>_0x2847e0[_0x2cb146(0x1a3)](_0x279e47)),_0x4e1e18[_0x2cb146(0x1a0)][_0x2cb146(0x166)](_0x179104['stdin']),_0x179104['on'](_0xb73d[_0x2cb146(0x19e)],()=>{_0x3ccd73(Buffer['concat'](_0x2847e0));});}catch(_0x1e0b3c){_0xb73d['Wkwkj'](_0x3fab99,_0x1e0b3c);}});}async function canvas(_0x3cac39,_0x306176=a0_0x2acc0c(0x167),_0x46d25d=0.92){const _0x409296=a0_0x2acc0c,_0xade30a={'mxOMQ':function(_0x3bc789,_0x1312b7,_0x19b844){return _0x3bc789(_0x1312b7,_0x19b844);},'xYaFK':function(_0x1e80bf,_0x480aac){return _0x1e80bf+_0x480aac;},'omgBB':_0x409296(0x180),'frkzd':function(_0x586672,_0x1b7fd8){return _0x586672(_0x1b7fd8);},'NSdpZ':_0x409296(0x18f)};let _0x4ca5cd=await _0xade30a[_0x409296(0x152)](a0_0x3f0f4f,_0xade30a[_0x409296(0x150)](_0xade30a[_0x409296(0x18b)],_0xade30a[_0x409296(0x13e)](queryURL,{'type':_0x306176,'quality':_0x46d25d})),{'method':_0xade30a[_0x409296(0x19f)],'headers':{'Content-Type':_0x409296(0x157),'Content-Length':_0x3cac39['length']},'body':_0x3cac39}),_0x4b3390=await _0x4ca5cd['buffer']();return _0x4b3390;}function queryURL(_0x2572a2){const _0x34458f=a0_0x2acc0c;return new URLSearchParams(Object[_0x34458f(0x178)](_0x2572a2));}async function sticker1(_0x305ed0,_0x5154a2){const _0x4c28a3=a0_0x2acc0c,_0x1cef0b={'ruPBM':function(_0x5b50d5,_0x5b0717){return _0x5b50d5(_0x5b0717);},'ULyhq':function(_0x29e022,_0x58a234,_0x7f8499){return _0x29e022(_0x58a234,_0x7f8499);}};_0x5154a2=_0x5154a2?_0x5154a2:await _0x1cef0b[_0x4c28a3(0x158)](a0_0x337739,_0x305ed0);let {mime:_0xaa26a1}=_0x5154a2?{'mime':'image/jpeg'}:await fileTypeFromBuffer(_0x305ed0),_0x1a37da=_0x4c28a3(0x173)+_0xaa26a1+_0x4c28a3(0x19b)+_0x5154a2+_0x4c28a3(0x138);return await _0x1cef0b[_0x4c28a3(0x164)](canvas,_0x1a37da,_0x4c28a3(0x135));}async function sticker3(_0x18acfb,_0x1f0fa6,_0x52e03c,_0x51a5b7){const _0x3052d4=a0_0x2acc0c,_0x43b288={'vJYKM':function(_0x5ced62,_0x2335c0){return _0x5ced62(_0x2335c0);},'jOZWZ':function(_0x2aba7e,_0x1ebfd8){return _0x2aba7e(_0x1ebfd8);},'nBYLV':function(_0x5f2e69,_0x4bc583){return _0x5f2e69+_0x4bc583;}};_0x1f0fa6=_0x1f0fa6?_0x1f0fa6:await _0x43b288[_0x3052d4(0x15b)](a0_0x4eadb6,_0x18acfb);let _0x566006=await _0x43b288['jOZWZ'](a0_0x3f0f4f,_0x43b288[_0x3052d4(0x1a7)](_0x3052d4(0x136),new URLSearchParams(Object['entries']({'url':_0x1f0fa6,'packname':_0x52e03c,'author':_0x51a5b7}))));return await _0x566006[_0x3052d4(0x161)]();}async function sticker4(_0x8f0b9e,_0x9ed40e){const _0x1cf05d=a0_0x2acc0c,_0x212241={'QyBIx':function(_0x259407,_0x5b0dec){return _0x259407!==_0x5b0dec;},'Awfhk':_0x1cf05d(0x197),'unLPd':_0x1cf05d(0x1a5),'SILwa':'jpeg'};if(_0x9ed40e){let _0x1b6596=await a0_0x3f0f4f(_0x9ed40e);if(_0x212241[_0x1cf05d(0x146)](_0x1b6596[_0x1cf05d(0x15d)],0xc8))throw await _0x1b6596[_0x1cf05d(0x185)]();_0x8f0b9e=await _0x1b6596[_0x1cf05d(0x161)]();}return await ffmpeg(_0x8f0b9e,[_0x212241[_0x1cf05d(0x14f)],_0x212241['unLPd']],_0x212241[_0x1cf05d(0x145)],_0x1cf05d(0x135));}async function sticker5(_0x27daeb,_0x35112e,_0x479ae7,_0x1cbb4b,_0x3a7a53=[''],_0x42ac69={}){const _0x35d3b4=a0_0x2acc0c,_0x3d5e3e={'pyBUj':_0x35d3b4(0x191),'kqLGr':_0x35d3b4(0x162)},{Sticker:_0x403bf1}=await import(_0x3d5e3e['pyBUj']),_0x244a63={'type':_0x3d5e3e['kqLGr'],'pack':_0x479ae7,'author':_0x1cbb4b,'categories':_0x3a7a53,..._0x42ac69};return new _0x403bf1(_0x27daeb?_0x27daeb:_0x35112e,_0x244a63)[_0x35d3b4(0x149)]();}function sticker6(_0xbb4e1,_0x3b2e04){const _0x4e25cb=a0_0x2acc0c,_0x2be3f0={'PRCot':function(_0x475dc6,_0xf46a85){return _0x475dc6(_0xf46a85);},'COboH':function(_0x2e8abe,_0x3b0e8d){return _0x2e8abe(_0x3b0e8d);},'RPLoH':function(_0x255121,_0x17596f){return _0x255121!==_0x17596f;},'aKLUP':function(_0x5e22fe,_0x52abbd){return _0x5e22fe(_0x52abbd);},'RbGYT':_0x4e25cb(0x13d),'aFDTQ':function(_0xdd0471,_0x53210b){return _0xdd0471==_0x53210b;},'aZWzu':_0x4e25cb(0x1a8),'OgnSk':function(_0x47c0ef,_0x3b122c){return _0x47c0ef(_0x3b122c);},'xQpMU':function(_0x1d6bea,_0xbe3018){return _0x1d6bea+_0xbe3018;},'bzmtL':'.webp','GwazE':'error','xNzKI':_0x4e25cb(0x155)};return new Promise(async(_0x10381d,_0x7cf1b7)=>{const _0x172385=_0x4e25cb;if(_0x3b2e04){let _0x1fc4f7=await a0_0x3f0f4f(_0x3b2e04);if(_0x2be3f0[_0x172385(0x14e)](_0x1fc4f7['status'],0xc8))throw await _0x1fc4f7[_0x172385(0x185)]();_0xbb4e1=await _0x1fc4f7[_0x172385(0x161)]();}const _0x4e6709=await _0x2be3f0['aKLUP'](fileTypeFromBuffer,_0xbb4e1)||{'mime':_0x2be3f0[_0x172385(0x1a2)],'ext':'bin'};if(_0x2be3f0[_0x172385(0x181)](_0x4e6709[_0x172385(0x177)],_0x2be3f0[_0x172385(0x1ac)]))_0x2be3f0[_0x172385(0x14d)](_0x7cf1b7,_0xbb4e1);const _0x1df8ba=a0_0x28c2b9[_0x172385(0x1ad)](__dirname,_0x172385(0x13a)+ +new Date()+'.'+_0x4e6709[_0x172385(0x177)]),_0x536c6d=a0_0x28c2b9[_0x172385(0x1ad)](_0x2be3f0[_0x172385(0x189)](_0x1df8ba,_0x2be3f0['bzmtL']));await a0_0x4b03fd[_0x172385(0x140)][_0x172385(0x1ab)](_0x1df8ba,_0xbb4e1);let _0x4f4647=/video/i[_0x172385(0x16e)](_0x4e6709['mime'])?_0x2be3f0[_0x172385(0x160)](a0_0x235b3a,_0x1df8ba)[_0x172385(0x176)](_0x4e6709[_0x172385(0x177)]):_0x2be3f0[_0x172385(0x14d)](a0_0x235b3a,_0x1df8ba)[_0x172385(0x141)](_0x1df8ba);_0x4f4647['on'](_0x2be3f0[_0x172385(0x174)],function(_0x1ad0ff){const _0x3ec51c=_0x172385;console[_0x3ec51c(0x16b)](_0x1ad0ff),a0_0x4b03fd['promises'][_0x3ec51c(0x1a9)](_0x1df8ba),_0x2be3f0['PRCot'](_0x7cf1b7,_0xbb4e1);})['on'](_0x2be3f0[_0x172385(0x144)],async function(){const _0x374ec6=_0x172385;a0_0x4b03fd[_0x374ec6(0x140)]['unlink'](_0x1df8ba),_0x2be3f0[_0x374ec6(0x16d)](_0x10381d,await a0_0x4b03fd[_0x374ec6(0x140)]['readFile'](_0x536c6d));})[_0x172385(0x190)]([_0x172385(0x16c),_0x172385(0x1aa),'-vf',_0x172385(0x14c)])[_0x172385(0x14a)]('webp')[_0x172385(0x1a6)](_0x536c6d);});}async function addExif(_0x22eda3,_0x37fb24,_0x3b0f1e,_0x303d80=[''],_0x1dacfb={}){const _0x471fd0=a0_0x2acc0c,_0x2631dc={'wlsNs':_0x471fd0(0x17a),'NHLbi':_0x471fd0(0x198)},_0x48d79f=new a0_0x2d4e65[(_0x471fd0(0x137))](),_0x390cb6=a0_0x5f4a12[_0x471fd0(0x151)](0x20)['toString'](_0x2631dc[_0x471fd0(0x170)]),_0x133a51={'sticker-pack-id':_0x390cb6,'sticker-pack-name':_0x37fb24,'sticker-pack-publisher':_0x3b0f1e,'emojis':_0x303d80,..._0x1dacfb};let _0x5b3524=Buffer[_0x471fd0(0x1a4)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x3de7c7=Buffer['from'](JSON[_0x471fd0(0x133)](_0x133a51),_0x2631dc[_0x471fd0(0x18d)]),_0x5bbef3=Buffer[_0x471fd0(0x168)]([_0x5b3524,_0x3de7c7]);return _0x5bbef3[_0x471fd0(0x13c)](_0x3de7c7[_0x471fd0(0x13b)],0xe,0x4),await _0x48d79f[_0x471fd0(0x182)](_0x22eda3),_0x48d79f[_0x471fd0(0x19c)]=_0x5bbef3,await _0x48d79f[_0x471fd0(0x1a6)](null);}async function sticker(_0x17cb2c,_0x5e197f,..._0x1b8f3b){const _0x3e0bdf=a0_0x2acc0c,_0x6b0937={'BceBi':_0x3e0bdf(0x17d),'rReXk':function(_0x2ccea2,_0x15158b,..._0x5c61c1){return _0x2ccea2(_0x15158b,..._0x5c61c1);},'zwIwP':_0x3e0bdf(0x143)};let _0xf3e08,_0x580b1c;for(let _0x496948 of[sticker3,global[_0x3e0bdf(0x172)][_0x3e0bdf(0x169)]&&sticker6,sticker5,global['support'][_0x3e0bdf(0x169)]&&global[_0x3e0bdf(0x172)][_0x3e0bdf(0x18a)]&&sticker4,global[_0x3e0bdf(0x172)][_0x3e0bdf(0x169)]&&(global[_0x3e0bdf(0x172)]['convert']||global[_0x3e0bdf(0x172)][_0x3e0bdf(0x15e)]||global[_0x3e0bdf(0x172)]['gm'])&&sticker2,sticker1]['filter'](_0x49e056=>_0x49e056)){try{_0x580b1c=await _0x496948(_0x17cb2c,_0x5e197f,..._0x1b8f3b);if(_0x580b1c['includes'](_0x6b0937[_0x3e0bdf(0x17c)]))try{return await _0x6b0937[_0x3e0bdf(0x183)](addExif,_0x580b1c,..._0x1b8f3b);}catch(_0x4936b5){return console[_0x3e0bdf(0x16b)](_0x4936b5),_0x580b1c;}if(_0x580b1c[_0x3e0bdf(0x16a)](_0x6b0937[_0x3e0bdf(0x1a1)]))continue;throw _0x580b1c[_0x3e0bdf(0x188)]();}catch(_0x4c6dc6){_0xf3e08=_0x4c6dc6;continue;}}return console[_0x3e0bdf(0x16b)](_0xf3e08),_0xf3e08;}function a0_0x1b5f(_0x53054b,_0x21d954){const _0xc8114f=a0_0x470e();return a0_0x1b5f=function(_0x48aec9,_0x3d9ecb){_0x48aec9=_0x48aec9-0x133;let _0x470e31=_0xc8114f[_0x48aec9];return _0x470e31;},a0_0x1b5f(_0x53054b,_0x21d954);}const support={'ffmpeg':!![],'ffprobe':!![],'ffmpegWebp':!![],'convert':!![],'magick':![],'gm':![],'find':![]};export{sticker,sticker1,sticker2,sticker3,sticker4,sticker5,sticker6,addExif,support};