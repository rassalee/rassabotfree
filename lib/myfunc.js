(function(_0x38ed86,_0x4f7df5){const _0x15e5c8=a0_0x45a7,_0x4c47f1=_0x38ed86();while(!![]){try{const _0x592b1d=parseInt(_0x15e5c8(0xae))/0x1*(parseInt(_0x15e5c8(0xa7))/0x2)+parseInt(_0x15e5c8(0xd5))/0x3+parseInt(_0x15e5c8(0xac))/0x4+parseInt(_0x15e5c8(0xcd))/0x5+parseInt(_0x15e5c8(0xaf))/0x6*(parseInt(_0x15e5c8(0xc8))/0x7)+-parseInt(_0x15e5c8(0xa9))/0x8*(-parseInt(_0x15e5c8(0xc2))/0x9)+-parseInt(_0x15e5c8(0xd3))/0xa;if(_0x592b1d===_0x4f7df5)break;else _0x4c47f1['push'](_0x4c47f1['shift']());}catch(_0xafb05f){_0x4c47f1['push'](_0x4c47f1['shift']());}}}(a0_0x3184,0x87c6a));const a0_0x2b2367=(function(){let _0x3ea0d0=!![];return function(_0x53212b,_0x59be0b){const _0x384b51=_0x3ea0d0?function(){if(_0x59be0b){const _0x165dd7=_0x59be0b['apply'](_0x53212b,arguments);return _0x59be0b=null,_0x165dd7;}}:function(){};return _0x3ea0d0=![],_0x384b51;};}()),a0_0x1d3416=a0_0x2b2367(this,function(){const _0x3167fa=a0_0x45a7,_0x5b2725={'MPVgW':_0x3167fa(0xca)};return a0_0x1d3416[_0x3167fa(0xa2)]()[_0x3167fa(0xad)](_0x5b2725['MPVgW'])[_0x3167fa(0xa2)]()['constructor'](a0_0x1d3416)[_0x3167fa(0xad)](_0x5b2725[_0x3167fa(0xd4)]);});a0_0x1d3416();import a0_0x5e98a5 from'axios';import a0_0x1d5d5 from'crypto';import a0_0x237757 from'path';import{tmpdir}from'os';import a0_0x12574a from'fs';function a0_0x45a7(_0x16ca78,_0x4f94b3){const _0x3f47ec=a0_0x3184();return a0_0x45a7=function(_0x1d3416,_0x2b2367){_0x1d3416=_0x1d3416-0x99;let _0x318453=_0x3f47ec[_0x1d3416];return _0x318453;},a0_0x45a7(_0x16ca78,_0x4f94b3);}import a0_0x1a0e57 from'fluent-ffmpeg';import a0_0x7a6599 from'node-webpmux';async function imageToWebp(_0x8a539f){const _0x3067c8=a0_0x45a7,_0x35e89c={'XEWvO':_0x3067c8(0xb2),'JzIsz':_0x3067c8(0x99),'IJDPE':'webp','NPgFS':function(_0x59e05e){return _0x59e05e();},'tJJrd':_0x3067c8(0xce)},_0x19e14f=a0_0x237757[_0x3067c8(0xa4)](_0x35e89c['NPgFS'](tmpdir),a0_0x1d5d5[_0x3067c8(0x9c)](0xa)[_0x3067c8(0xa2)](_0x35e89c[_0x3067c8(0xc5)])+_0x3067c8(0x9d)),_0x565be6=a0_0x237757[_0x3067c8(0xa4)](_0x35e89c['NPgFS'](tmpdir),a0_0x1d5d5[_0x3067c8(0x9c)](0xa)[_0x3067c8(0xa2)](_0x35e89c[_0x3067c8(0xc5)])+'.jpg');a0_0x12574a['writeFileSync'](_0x565be6,_0x8a539f),await new Promise((_0x3cc0bb,_0x13fe7d)=>{const _0x35219d=_0x3067c8;a0_0x1a0e57(_0x565be6)['on'](_0x35e89c['XEWvO'],_0x13fe7d)['on'](_0x35e89c['JzIsz'],()=>_0x3cc0bb(!![]))[_0x35219d(0xcb)]([_0x35219d(0xb9),_0x35219d(0xa3),_0x35219d(0xc7),_0x35219d(0xd7)])['toFormat'](_0x35e89c[_0x35219d(0xa6)])[_0x35219d(0xc4)](_0x19e14f);});const _0x4bfb05=a0_0x12574a['readFileSync'](_0x19e14f);return a0_0x12574a['unlinkSync'](_0x19e14f),a0_0x12574a[_0x3067c8(0xd6)](_0x565be6),_0x4bfb05;}async function videoToWebp(_0x220648){const _0x4f1e73=a0_0x45a7,_0x2f68c3={'GuBhq':function(_0x19b16b,_0x36c233){return _0x19b16b(_0x36c233);},'JbmsW':_0x4f1e73(0xb2),'gFBmt':'end','MiLoa':_0x4f1e73(0xcf),'mGyHf':_0x4f1e73(0xce)},_0x2ac574=a0_0x237757[_0x4f1e73(0xa4)](tmpdir(),a0_0x1d5d5['randomBytes'](0xa)[_0x4f1e73(0xa2)](_0x2f68c3[_0x4f1e73(0xaa)])+_0x4f1e73(0x9d)),_0x575e3e=a0_0x237757[_0x4f1e73(0xa4)](tmpdir(),a0_0x1d5d5[_0x4f1e73(0x9c)](0xa)[_0x4f1e73(0xa2)](_0x4f1e73(0xce))+_0x4f1e73(0xd2));a0_0x12574a[_0x4f1e73(0xd1)](_0x575e3e,_0x220648),await new Promise((_0x2a806d,_0x27b2b0)=>{const _0x1be877=_0x4f1e73;_0x2f68c3[_0x1be877(0xb6)](a0_0x1a0e57,_0x575e3e)['on'](_0x2f68c3[_0x1be877(0x9a)],_0x27b2b0)['on'](_0x2f68c3[_0x1be877(0xa0)],()=>_0x2a806d(!![]))[_0x1be877(0xcb)]([_0x1be877(0xb9),_0x1be877(0xa3),_0x1be877(0xc7),_0x1be877(0xd7)])[_0x1be877(0xab)](_0x2f68c3[_0x1be877(0xc3)])['save'](_0x2ac574);});const _0xeeed15=a0_0x12574a[_0x4f1e73(0x9f)](_0x2ac574);return a0_0x12574a[_0x4f1e73(0xd6)](_0x2ac574),a0_0x12574a[_0x4f1e73(0xd6)](_0x575e3e),_0xeeed15;}async function fetchBuffer(_0x48344b,_0x426a68){const _0x5928d6=a0_0x45a7,_0x35ec95={'AGqNg':function(_0x9b322f,_0x3d0a38){return _0x9b322f(_0x3d0a38);},'nzWeW':_0x5928d6(0x9b),'ulhju':_0x5928d6(0xc9),'hGcNC':_0x5928d6(0xbd)};try{_0x426a68?_0x426a68:{};const _0xe66fd4=await _0x35ec95[_0x5928d6(0xb0)](a0_0x5e98a5,{'method':_0x35ec95[_0x5928d6(0xbc)],'url':_0x48344b,'headers':{'User-Agent':_0x35ec95[_0x5928d6(0xa8)],'DNT':0x1,'Upgrade-Insecure-Request':0x1},..._0x426a68,'responseType':_0x35ec95[_0x5928d6(0xb5)]});return _0xe66fd4[_0x5928d6(0xc0)];}catch(_0x752104){return _0x752104;}}async function fetchJson(_0x40b1d9,_0x275be6){const _0x4f6a3f=a0_0x45a7,_0xc404bb={'AoGVZ':function(_0x254106,_0x1657d8){return _0x254106(_0x1657d8);},'CCTln':_0x4f6a3f(0x9b),'VNfdN':_0x4f6a3f(0xba)};try{_0x275be6?_0x275be6:{};const _0x45ad3a=await _0xc404bb[_0x4f6a3f(0xc6)](a0_0x5e98a5,{'method':_0xc404bb[_0x4f6a3f(0xb8)],'url':_0x40b1d9,'headers':{'User-Agent':_0xc404bb['VNfdN']},..._0x275be6});return _0x45ad3a['data'];}catch(_0x38cb0f){return _0x38cb0f;}}function a0_0x3184(){const _0x406f34=['save','tJJrd','AoGVZ','-vf','431326WwEykl','Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/78.0.3904.70\x20Safari/537.36','(((.+)+)+)+$','addOutputOptions','mimetype','2304290TRbzrq','hex','webp','categories','writeFileSync','.mp4','35261900DmrZxh','MPVgW','3073377tfAZGe','unlinkSync','scale=512:512:force_original_aspect_ratio=increase,fps=15,crop=512:512','end','JbmsW','GET','randomBytes','.webp','concat','readFileSync','gFBmt','author','toString','libwebp','join','from','IJDPE','21676JBvIqe','ulhju','392488MaHjGX','mGyHf','toFormat','1248652mNLuZK','search','27gaaeDy','108qPpGGd','AGqNg','length','error','yjxzV','load','hGcNC','GuBhq','eOpOU','CCTln','-vcodec','Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/95.0.4638.69\x20Safari/537.36','writeUIntLE','nzWeW','arraybuffer','utf-8','Nightmare\x20-\x20md','data','test','162tFhCRn','MiLoa'];a0_0x3184=function(){return _0x406f34;};return a0_0x3184();}async function writeExif(_0x3280d3,_0x545db9){const _0x130875=a0_0x45a7,_0x45c251={'yjxzV':function(_0x53d4c7){return _0x53d4c7();},'pGoIQ':_0x130875(0xce),'eOpOU':function(_0x38bdf8){return _0x38bdf8();}};let _0x3bb6b9=/webp/['test'](_0x3280d3[_0x130875(0xcc)])?_0x3280d3[_0x130875(0xc0)]:/image/['test'](_0x3280d3['mimetype'])?await imageToWebp(_0x3280d3[_0x130875(0xc0)]):/video/[_0x130875(0xc1)](_0x3280d3[_0x130875(0xcc)])?await videoToWebp(_0x3280d3[_0x130875(0xc0)]):'';const _0xd4a1e7=a0_0x237757[_0x130875(0xa4)](_0x45c251[_0x130875(0xb3)](tmpdir),a0_0x1d5d5[_0x130875(0x9c)](0xa)[_0x130875(0xa2)](_0x45c251['pGoIQ'])+_0x130875(0x9d)),_0x3aa273=a0_0x237757[_0x130875(0xa4)](_0x45c251[_0x130875(0xb7)](tmpdir),a0_0x1d5d5[_0x130875(0x9c)](0xa)[_0x130875(0xa2)](_0x45c251['pGoIQ'])+'.webp');a0_0x12574a[_0x130875(0xd1)](_0xd4a1e7,_0x3bb6b9);if(_0x545db9['packname']||_0x545db9[_0x130875(0xa1)]){const _0x4de9ac=new a0_0x7a6599['Image'](),_0x53e871={'sticker-pack-id':_0x130875(0xbf),'sticker-pack-name':_0x545db9['packname'],'sticker-pack-publisher':_0x545db9[_0x130875(0xa1)],'emojis':_0x545db9['categories']?_0x545db9[_0x130875(0xd0)]:['']},_0x36c9a9=Buffer['from']([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x4a78b0=Buffer[_0x130875(0xa5)](JSON['stringify'](_0x53e871),_0x130875(0xbe)),_0x389c27=Buffer[_0x130875(0x9e)]([_0x36c9a9,_0x4a78b0]);return _0x389c27[_0x130875(0xbb)](_0x4a78b0[_0x130875(0xb1)],0xe,0x4),await _0x4de9ac[_0x130875(0xb4)](_0xd4a1e7),a0_0x12574a['unlinkSync'](_0xd4a1e7),_0x4de9ac['exif']=_0x389c27,await _0x4de9ac[_0x130875(0xc4)](_0x3aa273),_0x3aa273;}}export{fetchJson,fetchBuffer,imageToWebp,videoToWebp,writeExif};